<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Folha de Ponto - Professor</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body class="bg-gray-100 min-h-screen">
    <div class="container mx-auto p-4 lg:p-8 flex flex-col items-center">
        <header class="bg-white rounded-lg shadow-lg p-6 no-print w-full max-w-5xl">
            <h1 class="text-3xl font-bold text-gray-800 mb-4 flex items-center">
                <span class="material-icons mr-3 text-blue-600 text-4xl">schedule</span>
                Gerador de Folha de Ponto
            </h1>
            <table class="w-full table-fixed border-collapse">
                <tbody>
                    <tr>
                        <td class="p-3" colspan="2">
                            <label for="professorName" class="block text-sm font-medium text-gray-700 mb-2">
                                Nome do Professor
                            </label>
                            <input type="text" id="professorName"
                                class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition"
                                placeholder="Digite o nome do professor">
                        </td>
                        <td class="p-3" colspan="2">
                            <label for="function" class="block text-sm font-medium text-gray-700 mb-2">
                                Função
                            </label>
                            <input type="text" id="function" class="w-full p-3 border border-gray-300 rounded-lg"
                                value="Professor para Educação Profissional e Tecnológica X">
                        </td>
                    </tr>
                    <tr>
                        <td class="p-3" colspan="4">
                            <label for="schoolName" class="block text-sm font-medium text-gray-700 mb-2">
                                Escola
                            </label>
                            <select id="schoolName"
                                class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition">
                                <option value="EFG SARAH LUISA LEMOS KUBITSCHEK DE OLIVEIRA">
                                    EFG SARAH LUISA LEMOS KUBITSCHEK DE OLIVEIRA - SANTO ANTÔNIO DO DESCOBERTO
                                </option>
                                <option value="ESCOLA DO FUTURO JOSÉ LUIZ BITTENCOURT" selected>
                                    EFG JOSE LUIZ BITTENCOURT – GOIÂNIA
                                </option>
                                <option value="EFG JL BITTENC - UDEPI MOSSAMEDES">
                                    EFG JL BITTENC - UDEPI MOSSAMEDES
                                </option>
                                <option value="EFG LUIZ RASSI - NART">
                                    EFG LUIZ RASSI - NART - CIDADE DE GOIÁS
                                </option>
                                <option value="EFG RAUL BRANDAO DE CASTRO">
                                    EFG RAUL BRANDAO DE CASTRO – MINEIROS
                                </option>
                                <option value="EFG LUIZ RASSI - APARECIDA">
                                    EFG LUIZ RASSI - APARECIDA DE GOIÂNIA
                                </option>
                                <option value="EFG EM ARTES BASILEU FRANCA">
                                    EFG EM ARTES BASILEU FRANCA – GOIÂNIA
                                </option>
                                <option value="EFG LUIZ RASSI - PROJETO JORNADA">
                                    EFG LUIZ RASSI - PROJETO JORNADA PARA O FUTURO – GOIÂNIA
                                </option>
                                <option value="EFG LUIZ RASSI - REDE DE ORQUESTRAS">
                                    EFG LUIZ RASSI- REDE DE ORQUESTRAS - APARECIDA DE GOIÂNIA
                                </option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td class="p-3">
                            <label for="contractType" class="block text-sm font-medium text-gray-700 mb-2">
                                Contrato
                            </label>
                            <select id="contractType" class="w-full p-3 border border-gray-300 rounded-lg">
                                <option value="CLT" selected>CLT</option>
                                <option value="RPA">RPA</option>
                            </select>
                        </td>
                        <td class="p-3">
                            <label for="chapa" class="block text-sm font-medium text-gray-700 mb-2">
                                Chapa
                            </label>
                            <input type="text" id="chapa" class="w-full p-3 border border-gray-300 rounded-lg"
                                value="009268">
                        </td>
                        <td class="p-3">
                            <label for="admissionDate" class="block text-sm font-medium text-gray-700 mb-2">
                                Data de Admissão
                            </label>
                            <input type="date" id="admissionDate" class="w-full p-3 border border-gray-300 rounded-lg"
                                value="2025-08-25">
                        </td>
                        <td class="p-3">
                            <label for="monthYear" class="block text-sm font-medium text-gray-700 mb-2">
                                Mês/Ano
                            </label>
                            <input type="month" id="monthYear"
                                class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition">
                        </td>
                    </tr>
                </tbody>
            </table>
        </header>
        <section class="bg-white rounded-lg shadow-lg p-6 my-6 no-print w-full max-w-5xl">
            <h2 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                <span class="material-icons mr-2 text-green-600">class</span>
                Cadastro de Módulos
            </h2>
            <form id="moduleForm" class="bg-gray-50 p-4 rounded-lg mb-4">
                <div class="grid md:grid-cols-2 gap-4 mb-4">
                    <div>
                        <label for="moduleName" class="block text-sm font-medium text-gray-700 mb-2">Nome do
                            Módulo</label>
                        <input type="text" id="moduleName" class="w-full p-2 border border-gray-300 rounded-lg"
                            placeholder="Ex: Matemática I" required>
                    </div>
                    <div>
                        <label for="moduleType"
                            class="block text-sm font-medium text-gray-700 mb-2">Modalidade</label>
                        <select id="moduleType" class="w-full p-2 border border-gray-300 rounded-lg">
                            <option value="presencial">Presencial</option>
                            <option value="online">Online</option>
                            <option value="ead">EAD/P</option>
                        </select>
                    </div>
                </div>
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Período de Validade do
                        Módulo</label>
                    <div class="flex items-center space-x-4 p-2 bg-white rounded-lg">
                        <label class="flex items-center cursor-pointer">
                            <input type="radio" name="modulePeriodType" value="full" checked
                                class="h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500">
                            <span class="ml-2 text-sm text-gray-700">Mês Inteiro</span>
                        </label>
                        <label class="flex items-center cursor-pointer">
                            <input type="radio" name="modulePeriodType" value="partial"
                                class="h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500">
                            <span class="ml-2 text-sm text-gray-700">Período Parcial</span>
                        </label>
                    </div>
                </div>
                <div id="modulePartialPeriodContainer" class="date-range-container grid md:grid-cols-2 gap-4 mb-4">
                    <div>
                        <label for="moduleStartDate" class="block text-sm font-medium text-gray-700 mb-2">Data de
                            Início
                            do
                            Módulo</label>
                        <input type="date" id="moduleStartDate"
                            class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition">
                    </div>
                    <div>
                        <label for="moduleEndDate" class="block text-sm font-medium text-gray-700 mb-2">Data de Fim
                            do
                            Módulo</label>
                        <input type="date" id="moduleEndDate"
                            class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition">
                    </div>
                </div>
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Dias da Semana</label>
                    <div id="daysOfWeekContainer" class="flex flex-wrap gap-2">
                        </div>
                </div>
                <div id="daySchedules" class="space-y-3 mb-4">
                    </div>
                <button type="submit"
                    class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg flex items-center transition-transform transform hover:scale-105">
                    <span class="material-icons mr-2">add</span>
                    Adicionar Módulo
                </button>
            </form>
            <div>
                <h3 class="text-lg font-medium text-gray-800 mb-3">Módulos Cadastrados</h3>
                <div id="modulesList" class="space-y-2">
                    <p class="text-gray-500 italic">Nenhum módulo cadastrado ainda.</p>
                </div>
            </div>
        </section>
        <section class="bg-white rounded-lg shadow-lg p-6 mb-6 no-print w-full max-w-5xl">
            <h2 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                <span class="material-icons mr-2 text-red-600">event_busy</span>
                Cadastro de Ausências
            </h2>
            <div class="mb-4">
                <h3 class="text-lg font-medium text-gray-800 mb-3">Ausências Cadastradas</h3>
                <div id="absencesList" class="space-y-2">
                    <p class="text-gray-500 italic">Nenhuma ausência cadastrada.</p>
                </div>
            </div>
            <form id="absenceForm" class="bg-gray-50 p-4 rounded-lg">
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Tipo de Ausência</label>
                    <div class="flex items-center space-x-4 p-2 bg-white rounded-lg">
                        <label class="flex items-center cursor-pointer">
                            <input type="radio" name="absenceType" value="feriado" checked
                                class="h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500">
                            <span class="ml-2 text-sm text-gray-700">Feriado</span>
                        </label>
                        <label class="flex items-center cursor-pointer">
                            <input type="radio" name="absenceType" value="atestado"
                                class="h-4 w-4 text-yellow-500 border-gray-300 focus:ring-yellow-500">
                            <span class="ml-2 text-sm text-gray-700">Atestado</span>
                        </label>
                        <label class="flex items-center cursor-pointer">
                            <input type="radio" name="absenceType" value="falta"
                                class="h-4 w-4 text-red-600 border-gray-300 focus:ring-red-500">
                            <span class="ml-2 text-sm text-gray-700">Falta</span>
                        </label>
                    </div>
                </div>
                <div id="absenceNameContainer" class="mb-4">
                    <label for="absenceName" class="block text-sm font-medium text-gray-700 mb-2">Nome do
                        Feriado</label>
                    <input type="text" id="absenceName" class="w-full p-2 border border-gray-300 rounded-lg"
                        placeholder="Ex: Dia do Trabalho">
                </div>
                <div class="grid md:grid-cols-2 gap-4 mb-4">
                    <div>
                        <label for="absenceStartDate" class="block text-sm font-medium text-gray-700 mb-2">Data de
                            Início</label>
                        <input type="date" id="absenceStartDate"
                            class="w-full p-2 border border-gray-300 rounded-lg" required>
                    </div>
                    <div>
                        <label for="absenceEndDate" class="block text-sm font-medium text-gray-700 mb-2">Data de
                            Fim</label>
                        <input type="date" id="absenceEndDate" class="w-full p-2 border border-gray-300 rounded-lg"
                            required>
                    </div>
                    <div>
                        <label for="absenceStartTime" class="block text-sm font-medium text-gray-700 mb-2">Horário
                            de
                            Início
                            (Opcional)</label>
                        <select id="absenceStartTime" data-role="start-time"
                            class="time-select border border-gray-300 rounded px-2 py-1 text-sm w-full cursor-pointer"></select>
                    </div>
                    <div>
                        <label for="absenceEndTime" class="block text-sm font-medium text-gray-700 mb-2">Horário de
                            Fim
                            (Opcional)</label>
                        <select id="absenceEndTime" data-role="end-time"
                            class="time-select border border-gray-300 rounded px-2 py-1 text-sm w-full cursor-pointer"></select>
                    </div>
                </div>
                <button type="submit"
                    class="text-white px-4 py-2 rounded-lg flex items-center transition-transform transform hover:scale-105">
                    <span class="material-icons mr-2">add</span>
                    Adicionar Ausência
                </button>
            </form>
        </section>
        <section class="bg-white rounded-lg shadow-lg p-6 mb-6 no-print w-full max-w-5xl">
            <h2 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                <span class="material-icons mr-2 text-blue-600">calendar_view_week</span>
                Grade de Horários
            </h2>
            <div class="overflow-x-auto">
                <table class="w-full border border-gray-300">
                    <thead class="bg-gray-50">
                        <tr>
                            <th class="border border-gray-300 p-2 text-sm font-medium w-24">Horário</th>
                            <th class="border border-gray-300 p-2 text-sm font-medium">Segunda</th>
                            <th class="border border-gray-300 p-2 text-sm font-medium">Terça</th>
                            <th class="border border-gray-300 p-2 text-sm font-medium">Quarta</th>
                            <th class="border border-gray-300 p-2 text-sm font-medium">Quinta</th>
                            <th class="border border-gray-300 p-2 text-sm font-medium">Sexta</th>
                            <th class="border border-gray-300 p-2 text-sm font-medium">Sábado</th>
                        </tr>
                    </thead>
                    <tbody id="scheduleGrid">
                        </tbody>
                </table>
            </div>
        </section>
                <!-- Generated Timesheet (for printing) -->
        <section id="timesheetContainer" class="bg-white rounded-lg shadow-lg print-container hidden w-full max-w-5xl">
            <div class="p-6">
                <header class="table-auto">
                    <h1 class="text-xs text-center font-bold ">FOLHA DE PONTO - MÊS <span
                            id="displayMonth"></span>
                        - <span id="displayYear"></span></h1>
                </header>
                <div class="overflow-x-auto ">
                    <table class="w-full border-collapse border border-gray-400 text-[0.5rem]">
                        <thead>
                            <tr class=" text-[0.65rem]">
                                <!-- ESCOLA -->
                                <td class="pr-4 border border-gray-400" rowspan="2" colspan="7">
                                    <div class="mb-2">
                                        <strong>ESCOLA:</strong> <span id="displaySchool"
                                            class="font-normal"></span>
                                    </div>
                                </td>
                                <!-- CHAPA -->
                                <td class="text-left border border-gray-400" colspan="5">
                                    <div><strong>CHAPA:</strong> <span id="displayChapa" class="font-normal"></span>
                                    </div>
                                </td>
                            </tr>

                            <!-- Row 2 -->
                            <tr class=" text-[0.65rem]">
                                <!-- LOTADO NA EFG -->
                                <td class="text-left border border-gray-400" colspan="5">
                                    <div><strong>LOTADO NA EFG:</strong> <span id="displayLotacao"
                                            class="font-normal">BITTENCOURT</span></div>
                                </td>
                            </tr>

                            <!-- Row 3 -->
                            <tr class=" text-[0.65rem]">
                                <!-- NOME PROFESSOR -->
                                <td class="pr-4 border border-gray-400" rowspan="2" colspan="7">
                                    <div class="mb-2">
                                        <strong>NOME DO PROFESSOR(A):</strong> <span id="displayProfessor"
                                            class="font-normal"></span>
                                    </div>
                                </td>
                                <!-- CONTRATO -->
                                <td class="text-left border border-gray-400" colspan="5">
                                    <strong>CONTRATO:</strong>
                                    &nbsp;&nbsp; ( <span id="displayContratoCltPercent"> </span> ) CLT
                                    &nbsp;&nbsp; ( <span id="displayContratoRpaPercent"> </span> ) RPA
                                </td>
                            </tr>

                            <!-- Row 4 -->
                            <tr class=" text-[0.65rem]" <!-- DATA DA ADMISSÃO -->
                                <td class="text-left border border-gray-400" colspan="5">
                                    <div><strong>DATA DA ADMISSÃO:</strong> <span id="displayAdmissionDate"
                                            class="font-normal"></span></div>
                                </td>
                            </tr>

                            <!-- Row 5 FUNÇÃO -->
                            <tr class=" text-[0.65rem]">
                                <td class="border border-gray-400" colspan="7">
                                    <div><strong>FUNÇÃO:</strong> <span id="displayFunction"
                                            class="font-normal"></span>
                                    </div>
                                </td>
                                <td class="border border-gray-400" colspan="5">
                                    <div><strong>HORÁRIO DE TRABALHO DE SEGUNDA A SÁBADO:</strong><br>
                                        08:00 - 12:00 / 13:00 - 17:00 / 18:00 - 22:00
                                    </div>
                                </td>
                            </tr>
                            <tr class="bg-gray-100">
                                <th rowspan="2" class="border border-gray-400 p-1 ">DIA</th>
                                <th rowspan="2" class="border border-gray-400 p-1 ">ENTRADA MATUTINO</th>
                                <th rowspan="2" class="border border-gray-400 p-1 ">SAÍDA MATUTINO</th>
                                <th rowspan="2" class="border border-gray-400 p-1 ">ENTRADA VESPERTINO</th>
                                <th rowspan="2" class="border border-gray-400 p-1 ">SAÍDA VESPERTINO</th>
                                <th rowspan="2" class="border border-gray-400 p-1 ">ENTRADA NOTURNO</th>
                                <th rowspan="2" class="border border-gray-400 p-1 ">SAÍDA NOTURNO</th>
                                <th colspan="4" class="border border-gray-400 p-1">TIPO DE HORAS TRABALHADAS</th>
                                <th rowspan="2" class="border border-gray-400 p-1 w-48">ASSINATURA OU VISTO DO
                                    DOCENTE
                                </th>
                            </tr>
                            <tr class="bg-gray-100">
                                <th class="border border-gray-400 w-16">PRESENCIAL</th>
                                <th class="border border-gray-400 w-16 "> ONLINE </th>
                                <th class="border border-gray-400 w-16 "> EAD / P </th>
                                <th class="border border-gray-400 w-16 "> ATESTADO </th>
                            </tr>
                        </thead>
                        <tbody id="timesheetBody">
                            <!-- Timesheet rows will be generated here -->
                        </tbody>
                        <tfoot class="bg-gray-50 text-[0.65rem] font-bold">
                            <tr>
                                <td colspan="11" class="border border-gray-400 p-1 text-right">
                                    TOTAL DE HORAS TRABALHADAS NO MÊS:
                                </td>
                                <td colspan="1" class="border border-gray-400 p-1 text-left">
                                    <span id="displayTotalHours" class="font-bold"></span>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="12" class="align-top p-2 text-left">
                                    <div><strong>OBSERVAÇÕES:</strong></div>
                                    <div class="border border-gray-300 min-h-[4rem]" id="displayObservations"></div>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="6" class="p-2">
                                    <div class="border-b-2 border-gray-600 pt-1">
                                        <strong>ASSINATURA DO PROFESSOR:</strong>
                                    </div>
                                </td>
                                <td colspan="6" class="p-2">
                                    <div class="border-b-2 border-gray-600 pt-1">
                                        <strong>ASSINATURA DO GESTOR:</strong>
                                    </div>
                                </td>
                            </tr>
                        </tfoot>
                    </table>
                </div>
            </div>
        </section>


        <footer class="no-print mt-6 w-full max-w-5xl">
            <table class="mx-auto">
                <tbody>
                    <tr>
                        <td class="p-2">
                            <button id="generateBtn"
                                class="bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg flex items-center text-lg shadow-md hover:shadow-lg transition-all transform hover:scale-105">
                                <span class="material-icons mr-2">assignment</span>
                                Gerar Folha de Ponto
                            </button>
                        </td>
                        <td class="p-2">
                            <button id="saveBtn"
                                class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg flex items-center text-lg shadow-md hover:shadow-lg transition-all transform hover:scale-105">
                                <span class="material-icons mr-2">save</span>
                                Salvar Dados
                            </button>
                        </td>
                        <td class="p-2">
                            <button id="loadBtn"
                                class="bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-lg flex items-center text-lg shadow-md hover:shadow-lg transition-all transform hover:scale-105">
                                <span class="material-icons mr-2">folder_open</span>
                                Carregar Dados
                            </button>
                        </td>
                        <td class="p-2">
                            <button id="printBtn"
                                class="bg-gray-800 hover:bg-gray-900 text-white px-6 py-3 rounded-lg flex items-center text-lg shadow-md hover:shadow-lg transition-all transform hover:scale-105">
                                <span class="material-icons mr-2">print</span>
                                Imprimir
                            </button>
                        </td>
                    </tr>
                </tbody>
            </table>
            <input type="file" id="loadFile" class="hidden" accept=".json">
        </footer>
    </div>
    <div id="toast" class="bg-gray-800 no-print"></div>

    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="controller.js"></script>
</body>
</html>